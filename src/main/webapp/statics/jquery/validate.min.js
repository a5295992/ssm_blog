/*表单 验证*/
var  notNull="notNull";   var notNullMessage=": 不能为空</p>";//默认
var  email  ="email";     var emailMessage  =": 请输入正确的邮箱格式</p>";//默认
var  phone  ="phone";     var phoneMessage  =": 请输入正确的手机号</p>";//默认
var  min    ="min";       var minMessage    =": 长度不足</p>";//默认
var  max    ="max";       var maxMessage    =": 超过最大的长度</p>";//默认
var FormValidate={
		validate:function(params,constraints){
			var result = {};
			var fails =  [];
			var entity= {};
			for (var int = 0; int < params.length; int++) {
				var param      =   params[int];
				var constraint =   constraints[int];
				var fail = {};
				if(constraint[notNull]!=''&&constraint[notNull]!=null&&typeof(constraint[notNull])!='undefined'){
					 if($(param).val().trim()==''){fail[param]="<p>"+param+notNullMessage;}
				}
				if(constraint[email]!=''&&constraint[email]!=null&&typeof(constraint[email])!='undefined'){
					 if(!isEmail($(param).val().trim())){fail[param]="<p>"+param+emailMessage;}
				}
				if(constraint[phone]!=''&&constraint[phone]!=null&&typeof(constraint[phone])!='undefined'){
					 if(!checkMobile($(param).val().trim())){fail[param]= "<p>"+param+phoneMessage;}
				}
				if(constraint[min]!=''&&constraint[min]!=null&&typeof(constraint[min])!='undefined'){
					 if($(param).val().trim().length<constraint[min]){fail[param]="<p>"+param+minMessage;}
				}
				if(constraint[max]!=''&&constraint[max]!=null&&typeof(constraint[max])!='undefined'){
					 if($(param).val().trim().length>constraint[max]){fail[param]= "<p>"+param+maxMessage;}
				}
				if(JSON.stringify(fail)!='{}'){
					fails[int]=fail;
				}else{
					var fieldName = param.replace('#','');
					entity[fieldName]= $(param).val();
				}
			}
			result['entity']     = fails.length>0?null:entity;
			result['fails']		 = fails;
			result['success']    = fails.length==0?true:false;
			return result;
		}

		
};

function checkMobile(sMobile){ 
    if(!(/^1[3|4|5|8][0-9]\d{4,8}$/.test(sMobile))){ 
        return false; 
    } else {
    	return true;
    }
} 

function isEmail(str){ 
	var reg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/; 
	return reg.test(str); 
} 